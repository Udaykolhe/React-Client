{"ast":null,"code":"import _slicedToArray from\"D:/Final_Project/PGDAC/PGDAC-Final-E-Learning-Frontend/my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from'react';import{Link}from'react-router-dom';import'./index.css';import{toast}from'react-toastify';import axios from'axios';import{useNavigate}from'react-router';import{URL}from'../../config';import Navibar from'../../Components/Navbar/Navibar';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ForgotPassword=function ForgotPassword(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),dataAdded=_useState6[0],setDataAdded=_useState6[1];var navigate=useNavigate();var updatepassword=function updatepassword(event){event.preventDefault();console.log(\"sending\");var body={email:email,password:password};var url=\"\".concat(URL,\"/user/updatePassword\");axios.post(url,body).then(function(response){var result=response.data;if(result['status']=='success'){// get the data sent by server\nvar _result$data=result['data'],user_id=_result$data.user_id,_email=_result$data.email,_password=_result$data.password,role=_result$data.role;// persist the logged in user's information for future use\nsessionStorage['id']=user_id;sessionStorage['email']=_email;sessionStorage['password']=_password;sessionStorage['role']=role;sessionStorage['loginStatus']=1;}toast.success(\"Password Reset Successfully\");navigate(\"/signin\");}).catch(function(error){console.log('Something went wrong',error);setDataAdded(\"Invalid Password\");});};var sendOTP=function sendOTP(event){event.preventDefault();console.log(\"sending\");// url to make signin api call\nvar url=\"\".concat(URL,\"/user/otp/\").concat(email);// make api call using axios\naxios.post(url).then(function(response){console.log(\"Reterive password\",response.data);setDataAdded(\"We have sent OTP to Your Register email\");navigate(\"/forgotpassword\");}).catch(function(error){console.log('Something went wrong',error);setDataAdded(\"Invalid Email\");});//   // get the server result\n//   const result = response.data\n//   console.log(result)\n//   if (result['status'] == 'success') {\n//     toast.success('Welcome to the application')\n//     // get the data sent by server\n//     const { id, firstName, lastName } = result['data']\n//     // persist the logged in user's information for future use\n//     sessionStorage['id'] = id\n//     sessionStorage['firstName'] = firstName\n//     sessionStorage['lastName'] = lastName\n//     // navigate to home component\n//     navigate('/')\n//   } else {\n//     toast.error('Invalid user name or password')\n//   }\n// })\n};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navibar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"login-wrapper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-app-wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"title\",children:\"Share your registered email\"}),/*#__PURE__*/_jsx(\"span\",{className:\"myspan\",children:\"You will get a mail regarding your password\"})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"form\",{className:\"form-wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"email\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{className:\"input\",type:\"email\",placeholder:\"Enter Register Email\",name:\"email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);},required:true})]}),/*#__PURE__*/_jsx(\"button\",{onClick:sendOTP,className:\"btn btn-success\",children:\"Send OTP\"}),dataAdded&&/*#__PURE__*/_jsx(\"h6\",{class:\"alert alartbox alert-primary\",role:\"alert\",children:dataAdded}),/*#__PURE__*/_jsxs(\"div\",{className:\"email\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"OTP\"}),/*#__PURE__*/_jsx(\"input\",{className:\"input\",type:\"number\",placeholder:\"Enter OTP\",name:\"otp\",required:true})]}),/*#__PURE__*/_jsx(\"button\",{onClick:true,className:\"btn btn-success\",children:\"Varify\"}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"email\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"New Password\"}),/*#__PURE__*/_jsx(\"input\",{className:\"input\",type:\"password\",placeholder:\"Enter Password\",name:\"password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}})]}),/*#__PURE__*/_jsx(\"button\",{onClick:updatepassword,className:\"submit\",children:\"Varify & Submit\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Link,{to:\"/signin\",children:\"Login\"})})]})]})})]});};export default ForgotPassword;{/* <div>\r\n    <Navibar/>\r\n      <br></br>\r\n      <br></br>\r\n      <br></br>\r\n      <h1>Forgot Password</h1>\r\n      <br></br>\r\n     \r\n      <div className=\"row\">\r\n        <div className=\"col\"></div>\r\n        <div className=\"col\">\r\n          <div className=\"form\">\r\n            <div className=\"mb-3\">\r\n              <label htmlFor=\"\" className=\"label-control\">\r\n                Email address\r\n              </label>\r\n              <input\r\n                onChange={(e) => {\r\n                  setEmail(e.target.value)\r\n                }}\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                required = {true} \r\n                \r\n              />\r\n            </div>\r\n\r\n            {/* <div className=\"mb-3\">\r\n              <label htmlFor=\"\" className=\"label-control\">\r\n              New Password\r\n              </label>\r\n              <input\r\n                onChange={(e) => {\r\n                  setNewPassword(e.target.value)\r\n                }}\r\n                type=\"password\"\r\n                className=\"form-control\"\r\n              />\r\n            </div> */}{/* <div className=\"mb-3\">\r\n              <label htmlFor=\"\" className=\"label-control\">\r\n             Confirm New Password\r\n              </label>\r\n              <input\r\n                onChange={(e) => {\r\n                 setConfirmNewPassword(e.target.value)\r\n                }}\r\n                type=\"password\"\r\n                className=\"form-control\"\r\n              />\r\n            </div> */}//           <div className=\"mb-3\">\n//             <button onClick={forgotpassword} className=\"btn btn-primary\">\n//               Change Password  \n//             </button>\n//             <br></br>\n//             <br></br>\n//             <div>\n//              after changing password you can signin here  <Link to=\"/signin\">Signin here.</Link>\n//             </div>\n//             <br></br>\n//           </div>\n//         </div>\n//       </div>\n//       <div className=\"col\"></div>\n//     </div>\n//   </div>\n// ) */}","map":{"version":3,"sources":["D:/Final_Project/PGDAC/PGDAC-Final-E-Learning-Frontend/my-app/src/Pages/ForgotPassword/index.js"],"names":["useState","Link","toast","axios","useNavigate","URL","Navibar","ForgotPassword","email","setEmail","password","setPassword","dataAdded","setDataAdded","navigate","updatepassword","event","preventDefault","console","log","body","url","post","then","response","result","data","user_id","role","sessionStorage","success","catch","error","sendOTP","e","target","value"],"mappings":"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","sourcesContent":["import { useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport './index.css'\r\nimport { toast } from 'react-toastify'\r\nimport axios from 'axios'\r\nimport { useNavigate } from 'react-router'\r\nimport { URL } from '../../config'\r\nimport Navibar from '../../Components/Navbar/Navibar'\r\n\r\nconst ForgotPassword = () => {\r\n  const [email , setEmail] =useState('')\r\n    const [password , setPassword] =useState('')\r\n \r\n  const [dataAdded, setDataAdded] = useState('');\r\n\r\n  const navigate = useNavigate()\r\n\r\n  const updatepassword = (event)=>{\r\n    event.preventDefault();\r\n    console.log(\"sending\",);\r\n\r\n    const body = {\r\n        email,\r\n         password,\r\n    }\r\n    const url = `${URL}/user/updatePassword`\r\n\r\n    axios.post(url,body).then((response) =>{\r\n        const result = response.data\r\n        if (result['status'] == 'success') {\r\n            // get the data sent by server\r\n         const { user_id, email, password, role } = result['data']\r\n        // persist the logged in user's information for future use\r\n         sessionStorage['id'] = user_id\r\n         sessionStorage['email'] = email\r\n         sessionStorage['password'] = password\r\n         sessionStorage['role'] =role\r\n         sessionStorage['loginStatus'] = 1\r\n        }\r\n\r\n        toast.success(\"Password Reset Successfully\");\r\n        navigate(\"/signin\")\r\n    }).catch(error => {\r\n        console.log('Something went wrong', error);\r\n        setDataAdded(\"Invalid Password\");\r\n    });\r\n\r\n\r\n}\r\n  \r\n  const sendOTP = (event) => {\r\n   event.preventDefault();\r\n   console.log(\"sending\",);\r\n\r\n      // url to make signin api call\r\n      const url = `${URL}/user/otp/${email}`\r\n\r\n      // make api call using axios\r\n      axios.post(url).then((response) => {\r\n        console.log(\"Reterive password\", response.data);  \r\n        setDataAdded(\"We have sent OTP to Your Register email\");\r\n        navigate(\"/forgotpassword\")\r\n      })\r\n      .catch(error => {\r\n          console.log('Something went wrong', error);\r\n          setDataAdded(\"Invalid Email\");\r\n      })\r\n      //   // get the server result\r\n      //   const result = response.data\r\n      //   console.log(result)\r\n      //   if (result['status'] == 'success') {\r\n      //     toast.success('Welcome to the application')\r\n\r\n      //     // get the data sent by server\r\n      //     const { id, firstName, lastName } = result['data']\r\n\r\n      //     // persist the logged in user's information for future use\r\n      //     sessionStorage['id'] = id\r\n      //     sessionStorage['firstName'] = firstName\r\n      //     sessionStorage['lastName'] = lastName\r\n\r\n      //     // navigate to home component\r\n      //     navigate('/')\r\n      //   } else {\r\n      //     toast.error('Invalid user name or password')\r\n      //   }\r\n      // })\r\n    \r\n  }\r\n\r\n  return (\r\n\r\n\r\n    <>\r\n    <Navibar/>\r\n   \r\n   <div className='login-wrapper'>\r\n       <div className='login-app-wrapper'>\r\n      \r\n           <div>\r\n               <h2 className='title'>Share your registered email</h2>\r\n               <span className=\"myspan\">You will get a mail regarding your password</span>\r\n           </div>\r\n           <br/>\r\n           \r\n          \r\n           <form className='form-wrapper'>\r\n               <div className='email'>\r\n                   <label className='label'>Email</label>\r\n                   <input className='input' type='email' placeholder='Enter Register Email' name='email' value={email} onChange={(e) => setEmail(e.target.value)} required/>\r\n                       </div>\r\n              \r\n                       <button onClick={sendOTP} className=\"btn btn-success\"  >\r\n             Send OTP\r\n           </button>\r\n           {dataAdded && <h6 class=\"alert alartbox alert-primary\" role=\"alert\">{dataAdded}</h6>\r\n    }\r\n           \r\n            \r\n            <div className='email'>\r\n                   <label className='label'>OTP</label>\r\n                   <input className='input' type='number' placeholder='Enter OTP' name='otp' required  />\r\n                   \r\n               </div>\r\n\r\n               <button onClick={true}  className=\"btn btn-success\"  >\r\n             Varify\r\n           </button>\r\n\r\n               <div>\r\n          \r\n         </div>\r\n\r\n         <div className='email'>\r\n                   <label className='label'>New Password</label>\r\n                   <input className='input' type='password' placeholder='Enter Password' name='password' value={password} onChange={(e)=> setPassword(e.target.value    )} />\r\n                   \r\n               </div>\r\n               <button onClick={updatepassword} className=\"submit\"  >\r\n            Varify & Submit\r\n           </button>\r\n               <div>\r\n               <Link to=\"/signin\">Login</Link>\r\n               </div>\r\n           </form>\r\n       </div>\r\n   </div>\r\n   </>\r\n  )\r\n    \r\n}\r\n\r\nexport default ForgotPassword\r\n\r\n{/* <div>\r\n    <Navibar/>\r\n      <br></br>\r\n      <br></br>\r\n      <br></br>\r\n      <h1>Forgot Password</h1>\r\n      <br></br>\r\n     \r\n      <div className=\"row\">\r\n        <div className=\"col\"></div>\r\n        <div className=\"col\">\r\n          <div className=\"form\">\r\n            <div className=\"mb-3\">\r\n              <label htmlFor=\"\" className=\"label-control\">\r\n                Email address\r\n              </label>\r\n              <input\r\n                onChange={(e) => {\r\n                  setEmail(e.target.value)\r\n                }}\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                required = {true} \r\n                \r\n              />\r\n            </div>\r\n\r\n            {/* <div className=\"mb-3\">\r\n              <label htmlFor=\"\" className=\"label-control\">\r\n              New Password\r\n              </label>\r\n              <input\r\n                onChange={(e) => {\r\n                  setNewPassword(e.target.value)\r\n                }}\r\n                type=\"password\"\r\n                className=\"form-control\"\r\n              />\r\n            </div> */}\r\n\r\n            {/* <div className=\"mb-3\">\r\n              <label htmlFor=\"\" className=\"label-control\">\r\n             Confirm New Password\r\n              </label>\r\n              <input\r\n                onChange={(e) => {\r\n                 setConfirmNewPassword(e.target.value)\r\n                }}\r\n                type=\"password\"\r\n                className=\"form-control\"\r\n              />\r\n            </div> */}\r\n           \r\n  //           <div className=\"mb-3\">\r\n  //             <button onClick={forgotpassword} className=\"btn btn-primary\">\r\n  //               Change Password  \r\n  //             </button>\r\n  //             <br></br>\r\n  //             <br></br>\r\n  //             <div>\r\n  //              after changing password you can signin here  <Link to=\"/signin\">Signin here.</Link>\r\n  //             </div>\r\n  //             <br></br>\r\n  //           </div>\r\n  //         </div>\r\n  //       </div>\r\n  //       <div className=\"col\"></div>\r\n  //     </div>\r\n  //   </div>\r\n  // ) */}"]},"metadata":{},"sourceType":"module"}