{"ast":null,"code":"import _slicedToArray from\"D:/Final_Project/PGDAC/PGDAC-Final-E-Learning-Frontend/my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// import Image from 'react-bootstrap/Image';\n// import image from 'D:/SigninSigupFormats/SigninSigupFormat/my-app/src/Pages/images/eler.jpg';\nimport'bootstrap/dist/css/bootstrap.min.css';import{useState}from'react';import{useNavigate}from'react-router';import{Link}from'react-router-dom';import{toast}from'react-toastify';import axios from'axios';import Navibar from'../../Components/Navbar/Navibar';import{URL}from'../../config';import validation from\"../Signin/validation\";import'./index.css';import\"../Signin/style.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Signin=function Signin(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),role=_useState6[0],setRole=_useState6[1];var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),errors=_useState8[0],setErrors=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),dataIsCorrect=_useState10[0],setDataIsCorrect=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),dataAdded=_useState12[0],setDataAdded=_useState12[1];var user={email:email,password:password};var navigate=useNavigate();//   const handleChange = (event) =>{\n//     setValues({\n//         ...values,\n//         [event.target.name]: event.target.value,\n//     });\n// }\nvar signinUser=function signinUser(event){event.preventDefault();setDataIsCorrect(true);setErrors(validation(user));{var body={email:email,password:password,role:role};// url to make signin api call\nvar url=\"\".concat(URL,\"/user/signin\");// make api call using axios\naxios.post(url,body).then(function(response){// get the server result\nvar result=response.data;console.log(result);if(result['status']=='success'){// get the data sent by server\nvar _result$data=result['data'],user_id=_result$data.user_id,_email=_result$data.email,_password=_result$data.password,_role=_result$data.role;// persist the logged in user's information for future use\nsessionStorage['id']=user_id;sessionStorage['email']=_email;sessionStorage['password']=_password;sessionStorage['role']=_role;sessionStorage['loginStatus']=1;// navigate to home component\nif(_role==='STUDENT'){setDataAdded(\"Login Successfully\");console.log('usercourses');navigate(\"/usercourses\");}else if(_role==='ADMIN'){setDataAdded(\"Login Successfully\");navigate('/admin');}}else{setDataAdded(\"Invalid Email And Password\");}});}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navibar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"login-wrapper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-app-wrapper\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h2\",{className:\"title\",children:\"Log in\"})}),dataAdded&&/*#__PURE__*/_jsx(\"h3\",{className:\"alert  alert-warning\",role:\"alert\",children:dataAdded}),/*#__PURE__*/_jsxs(\"form\",{className:\"form-wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"email\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{className:\"input\",type:\"text\",name:\"email\",required:true,value:email,onChange:function onChange(e){return setEmail(e.target.value);}}),errors.email&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:errors.email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"name\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{className:\"input\",type:\"password\",name:\"password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}}),errors.password&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:errors.password})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"login-button\",onClick:signinUser,children:\"Log in\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(Link,{to:\"/forgotpassword\",children:\"forget password?\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[\"New User? Register here \",/*#__PURE__*/_jsx(Link,{to:\"/signup\",children:\"Register Now\"})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Home\"})})]})]})})]});};export default Signin;","map":{"version":3,"sources":["D:/Final_Project/PGDAC/PGDAC-Final-E-Learning-Frontend/my-app/src/Pages/Signin/index.js"],"names":["useState","useNavigate","Link","toast","axios","Navibar","URL","validation","Signin","email","setEmail","password","setPassword","role","setRole","errors","setErrors","dataIsCorrect","setDataIsCorrect","dataAdded","setDataAdded","user","navigate","signinUser","event","preventDefault","body","url","post","then","response","result","data","console","log","user_id","sessionStorage","e","target","value"],"mappings":"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","sourcesContent":["// import Image from 'react-bootstrap/Image';\r\n// import image from 'D:/SigninSigupFormats/SigninSigupFormat/my-app/src/Pages/images/eler.jpg';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport { useState } from 'react'\r\nimport { useNavigate } from 'react-router'\r\nimport { Link } from 'react-router-dom'\r\nimport { toast } from 'react-toastify'\r\nimport axios from 'axios'\r\n\r\nimport Navibar from '../../Components/Navbar/Navibar';\r\nimport { URL } from '../../config'\r\nimport validation from \"../Signin/validation\";\r\n\r\nimport './index.css'\r\nimport \"../Signin/style.css\"\r\n\r\n\r\n\r\nconst Signin = () => {\r\n\r\n  const [email, setEmail] = useState('')\r\n  const [password, setPassword] = useState('')\r\n  const [role, setRole] = useState('')\r\n  const [errors, setErrors] = useState({});\r\n\r\n  const [dataIsCorrect, setDataIsCorrect] = useState(false);\r\nconst [dataAdded, setDataAdded] = useState('');\r\n\r\n  const user ={email,password}\r\n\r\n  const navigate = useNavigate()\r\n\r\n//   const handleChange = (event) =>{\r\n//     setValues({\r\n//         ...values,\r\n//         [event.target.name]: event.target.value,\r\n//     });\r\n// }\r\n\r\n  const signinUser = (event) => {\r\n    event.preventDefault();\r\n    setDataIsCorrect(true);\r\n     setErrors(validation(user))\r\n     {\r\n      const body = {\r\n        email,\r\n        password,\r\n        role,\r\n      }\r\n\r\n      // url to make signin api call\r\n      const url = `${URL}/user/signin`\r\n\r\n      // make api call using axios\r\n      axios.post(url, body).then((response) => {\r\n        // get the server result\r\n        const result = response.data\r\n        console.log(result)\r\n        \r\n        if (result['status'] == 'success') {\r\n             // get the data sent by server\r\n          const { user_id, email, password, role } = result['data']\r\n\r\n          // persist the logged in user's information for future use\r\n          sessionStorage['id'] = user_id\r\n          sessionStorage['email'] = email\r\n          sessionStorage['password'] = password\r\n          sessionStorage['role'] =role\r\n          sessionStorage['loginStatus'] = 1\r\n\r\n\r\n          // navigate to home component\r\n          if (role === 'STUDENT') {\r\n            setDataAdded(\"Login Successfully\");\r\n            console.log('usercourses')\r\n            navigate(\"/usercourses\")\r\n          } else if (role === 'ADMIN') {\r\n            setDataAdded(\"Login Successfully\");\r\n            navigate('/admin')\r\n          }\r\n\r\n        } else {\r\n          setDataAdded(\"Invalid Email And Password\");\r\n        }\r\n      })\r\n    }\r\n  }\r\n  return (\r\n    <>\r\n      <Navibar />\r\n      \r\n     \r\n      <div className='login-wrapper'>\r\n        <div className='login-app-wrapper'>\r\n          <div>\r\n            <h2 className='title'>Log in</h2>\r\n          </div>\r\n          {dataAdded && <h3 className=\"alert  alert-warning\" role=\"alert\">{dataAdded}</h3>}\r\n          <form className='form-wrapper'>\r\n            <div className='email'>\r\n              <label className='label'>Email</label>\r\n              <input className='input' type='text'\r\n              name='email'\r\n              required\r\n              value={email}  onChange={(e)=>setEmail(e.target.value)} />\r\n              {errors.email && <p className='error'>{errors.email}</p>}\r\n            </div>\r\n            <div className='name'>\r\n              <label className='label'>Password</label>\r\n              <input className='input' type='password'\r\n              name='password'\r\n              value={password} onChange={(e)=>setPassword(e.target.value)} />\r\n              {errors.password && <p className='error'>{errors.password}</p>}\r\n            </div>\r\n            <div>\r\n              <button className='login-button' onClick={signinUser}>Log in</button>\r\n            </div>\r\n            <div className=\"form-group\">\r\n              <Link to=\"/forgotpassword\">forget password?</Link>\r\n            </div>\r\n            <div className=\"form-group\">\r\n              New User? Register here <Link to=\"/signup\">Register Now</Link>\r\n            </div>\r\n\r\n            <div>\r\n              <Link to=\"/\">Home</Link>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Signin"]},"metadata":{},"sourceType":"module"}